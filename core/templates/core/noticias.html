{% extends 'core/base.html' %}

{% block content %}
  <h1>Noticias del Clan</h1>

  <!-- Filtros -->
<form method="GET" action="{% url 'noticias' %}">
  <label for="juego">Juego:</label>
  <select name="juego" id="juego">
    <option value="">Todos</option>
    <option value="pokemon">Pokémon</option>
    <option value="yugioh">Yu-Gi-Oh!</option>
    <option value="mitosyleyendas">Mitos y leyendas</option>
  </select>

  <label for="tipo_evento">Tipo de evento:</label>
  <select name="tipo_evento" id="tipo_evento">
    <option value="">Todos</option>
    <option value="actualizacion">Actualización</option>
    <option value="torneo">Torneo</option>
    <option value="lanzamiento">Lanzamiento</option>
  </select>

  <label for="fecha">Desde fecha:</label>
  <input type="date" name="fecha" id="fecha">

  <button type="submit">Filtrar</button>
</form>



  <!-- Resultados -->
  <div class="noticias-lista">
    {% for noticia in noticias %}
      <div class="noticia-card">
        <h2>{{ noticia.titulo }}</h2>
        <p><strong>Juego:</strong> {{ noticia.get_juego_display }}</p>
        <p><strong>Tipo de evento:</strong> {{ noticia.get_tipo_evento_display }}</p>
        <p><strong>Fecha:</strong> {{ noticia.fecha }}</p>
        <p>{{ noticia.resumen }}</p>
        <a href="{{ noticia.fuente }}" target="_blank">Leer más</a>
        {% if noticia.imagen %}
          <img src="{{ noticia.imagen }}" alt="Imagen de la noticia">
        {% endif %}
      </div>
    {% empty %}
      <p>No se encontraron noticias con esos filtros.</p>
    {% endfor %}
  </div>
{% endblock %}
